<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#667eea">
    <meta name="description" content="Aplikasi Manajemen Keuangan Pribadi">
    <title>ðŸ’° Dompet Digital</title>
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Splash Screen -->
    <div id="splash" class="splash">
        <div class="splash-content">
            <i class="fas fa-wallet splash-icon"></i>
            <h1>Dompet Digital</h1>
            <div class="loader"></div>
        </div>
    </div>

    <!-- Main App -->
    <div id="app" class="app hidden">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="greeting">
                    <h1 id="greeting-text">Selamat Pagi!</h1>
                    <p id="current-date"></p>
                </div>
                <div class="header-actions">
                    <button class="btn-icon" onclick="showSettings()">
                        <i class="fas fa-cog"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Balance Card -->
        <section class="balance-section">
            <div class="balance-card">
                <div class="balance-header">
                    <span>Total Saldo</span>
                    <button class="btn-icon small" onclick="toggleBalance()">
                        <i class="fas fa-eye" id="eye-icon"></i>
                    </button>
                </div>
                <h2 class="balance-amount" id="total-balance">Rp 0</h2>
                <div class="balance-stats">
                    <div class="stat income">
                        <i class="fas fa-arrow-down"></i>
                        <div>
                            <span>Pemasukan</span>
                            <strong id="total-income">Rp 0</strong>
                        </div>
                    </div>
                    <div class="stat expense">
                        <i class="fas fa-arrow-up"></i>
                        <div>
                            <span>Pengeluaran</span>
                            <strong id="total-expense">Rp 0</strong>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Quick Actions -->
        <section class="quick-actions">
            <button class="action-btn income" onclick="showAddTransaction('income')">
                <i class="fas fa-plus-circle"></i>
                <span>Pemasukan</span>
            </button>
            <button class="action-btn expense" onclick="showAddTransaction('expense')">
                <i class="fas fa-minus-circle"></i>
                <span>Pengeluaran</span>
            </button>
            <button class="action-btn schedule" onclick="showSchedule()">
                <i class="fas fa-calendar-alt"></i>
                <span>Jadwal</span>
            </button>
            <button class="action-btn report" onclick="showReport()">
                <i class="fas fa-chart-pie"></i>
                <span>Laporan</span>
            </button>
        </section>

        <!-- Today Summary -->
        <section class="today-section">
            <div class="section-header">
                <h3><i class="fas fa-calendar-day"></i> Hari Ini</h3>
                <span class="badge" id="today-count">0 transaksi</span>
            </div>
            <div class="today-card">
                <div class="today-stat">
                    <div class="today-icon income">
                        <i class="fas fa-arrow-down"></i>
                    </div>
                    <div class="today-info">
                        <span>Pemasukan Hari Ini</span>
                        <strong id="today-income">Rp 0</strong>
                    </div>
                </div>
                <div class="today-stat">
                    <div class="today-icon expense">
                        <i class="fas fa-arrow-up"></i>
                    </div>
                    <div class="today-info">
                        <span>Pengeluaran Hari Ini</span>
                        <strong id="today-expense">Rp 0</strong>
                    </div>
                </div>
                <div class="today-net">
                    <span>Sisa Hari Ini</span>
                    <strong id="today-net">Rp 0</strong>
                </div>
            </div>
        </section>

        <!-- Recent Transactions -->
        <section class="transactions-section">
            <div class="section-header">
                <h3><i class="fas fa-history"></i> Transaksi Terbaru</h3>
                <button class="btn-text" onclick="showAllTransactions()">Lihat Semua</button>
            </div>
            <div class="transactions-list" id="transactions-list">
                <!-- Transactions will be inserted here -->
            </div>
        </section>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-item active" onclick="switchTab('home')">
                <i class="fas fa-home"></i>
                <span>Beranda</span>
            </button>
            <button class="nav-item" onclick="switchTab('transactions')">
                <i class="fas fa-exchange-alt"></i>
                <span>Transaksi</span>
            </button>
            <button class="nav-item add-btn" onclick="showAddTransaction()">
                <i class="fas fa-plus"></i>
            </button>
            <button class="nav-item" onclick="switchTab('schedule')">
                <i class="fas fa-calendar"></i>
                <span>Jadwal</span>
            </button>
            <button class="nav-item" onclick="switchTab('profile')">
                <i class="fas fa-user"></i>
                <span>Profil</span>
            </button>
        </nav>
    </div>

    <!-- Add Transaction Modal -->
    <div id="add-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Tambah Transaksi</h3>
                <button class="btn-icon" onclick="closeModal('add-modal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="transaction-form" onsubmit="saveTransaction(event)">
                <div class="form-group">
                    <label>Jenis Transaksi</label>
                    <div class="type-selector">
                        <input type="radio" name="type" id="type-income" value="income">
                        <label for="type-income" class="type-btn income">
                            <i class="fas fa-arrow-down"></i> Pemasukan
                        </label>
                        <input type="radio" name="type" id="type-expense" value="expense" checked>
                        <label for="type-expense" class="type-btn expense">
                            <i class="fas fa-arrow-up"></i> Pengeluaran
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label for="amount">Jumlah (Rp)</label>
                    <input type="number" id="amount" placeholder="0" required min="1">
                </div>
                <div class="form-group">
                    <label for="category">Kategori</label>
                    <select id="category" required>
                        <option value="">Pilih Kategori</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="description">Keterangan</label>
                    <input type="text" id="description" placeholder="Contoh: Makan siang">
                </div>
                <div class="form-group">
                    <label for="date">Tanggal</label>
                    <input type="date" id="date" required>
                </div>
                <div class="form-group">
                    <label for="time">Waktu</label>
                    <input type="time" id="time" required>
                </div>
                <button type="submit" class="btn-primary">
                    <i class="fas fa-save"></i> Simpan
                </button>
            </form>
        </div>
    </div>

    <!-- Schedule Modal -->
    <div id="schedule-modal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3><i class="fas fa-calendar-alt"></i> Jadwal Keuangan</h3>
                <button class="btn-icon" onclick="closeModal('schedule-modal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="schedule-container">
                <div class="calendar-nav">
                    <button class="btn-icon" onclick="prevMonth()">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <h4 id="calendar-month">Januari 2024</h4>
                    <button class="btn-icon" onclick="nextMonth()">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
                <div class="calendar" id="calendar">
                    <!-- Calendar will be generated here -->
                </div>
                <div class="schedule-summary">
                    <h4>Ringkasan Bulan Ini</h4>
                    <div class="summary-grid">
                        <div class="summary-item">
                            <span>Total Pemasukan</span>
                            <strong class="income" id="month-income">Rp 0</strong>
                        </div>
                        <div class="summary-item">
                            <span>Total Pengeluaran</span>
                            <strong class="expense" id="month-expense">Rp 0</strong>
                        </div>
                        <div class="summary-item">
                            <span>Rata-rata/Hari</span>
                            <strong id="daily-average">Rp 0</strong>
                        </div>
                        <div class="summary-item">
                            <span>Hari Terbaik</span>
                            <strong class="income" id="best-day">-</strong>
                        </div>
                    </div>
                </div>
                <div class="daily-detail" id="daily-detail">
                    <!-- Daily detail will be shown here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Report Modal -->
    <div id="report-modal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3><i class="fas fa-chart-pie"></i> Laporan Keuangan</h3>
                <button class="btn-icon" onclick="closeModal('report-modal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="report-container">
                <div class="report-tabs">
                    <button class="tab-btn active" onclick="switchReportTab('weekly')">Mingguan</button>
                    <button class="tab-btn" onclick="switchReportTab('monthly')">Bulanan</button>
                    <button class="tab-btn" onclick="switchReportTab('category')">Kategori</button>
                </div>
                <div class="report-content" id="report-content">
                    <!-- Report content will be generated here -->
                </div>
                <div class="export-section">
                    <button class="btn-secondary" onclick="exportData('csv')">
                        <i class="fas fa-file-csv"></i> Export CSV
                    </button>
                    <button class="btn-secondary" onclick="exportData('json')">
                        <i class="fas fa-file-code"></i> Export JSON
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- All Transactions Modal -->
    <div id="all-transactions-modal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3><i class="fas fa-list"></i> Semua Transaksi</h3>
                <button class="btn-icon" onclick="closeModal('all-transactions-modal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="filter-section">
                <input type="text" id="search-transaction" placeholder="Cari transaksi..." oninput="filterTransactions()">
                <select id="filter-type" onchange="filterTransactions()">
                    <option value="all">Semua Jenis</option>
                    <option value="income">Pemasukan</option>
                    <option value="expense">Pengeluaran</option>
                </select>
                <select id="filter-category" onchange="filterTransactions()">
                    <option value="all">Semua Kategori</option>
                </select>
            </div>
            <div class="transactions-list full" id="all-transactions-list">
                <!-- All transactions will be listed here -->
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-cog"></i> Pengaturan</h3>
                <button class="btn-icon" onclick="closeModal('settings-modal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="settings-container">
                <div class="setting-item">
                    <div class="setting-info">
                        <i class="fas fa-user"></i>
                        <div>
                            <strong>Nama</strong>
                            <span id="display-name">User</span>
                        </div>
                    </div>
                    <button class="btn-text" onclick="changeName()">Ubah</button>
                </div>
                <div class="setting-item">
                    <div class="setting-info">
                        <i class="fas fa-bullseye"></i>
                        <div>
                            <strong>Target Harian</strong>
                            <span id="display-target">Rp 0</span>
                        </div>
                    </div>
                    <button class="btn-text" onclick="changeTarget()">Ubah</button>
                </div>
                <div class="setting-item">
                    <div class="setting-info">
                        <i class="fas fa-palette"></i>
                        <div>
                            <strong>Tema</strong>
                            <span id="display-theme">Terang</span>
                        </div>
                    </div>
                    <button class="btn-text" onclick="toggleTheme()">Ubah</button>
                </div>
                <div class="setting-item danger">
                    <div class="setting-info">
                        <i class="fas fa-trash"></i>
                        <div>
                            <strong>Hapus Semua Data</strong>
                            <span>Hati-hati! Tidak dapat dikembalikan</span>
                        </div>
                    </div>
                    <button class="btn-danger" onclick="clearAllData()">Hapus</button>
                </div>
                <div class="setting-item">
                    <div class="setting-info">
                        <i class="fas fa-download"></i>
                        <div>
                            <strong>Backup Data</strong>
                            <span>Simpan data ke file</span>
                        </div>
                    </div>
                    <button class="btn-text" onclick="backupData()">Backup</button>
                </div>
                <div class="setting-item">
                    <div class="setting-info">
                        <i class="fas fa-upload"></i>
                        <div>
                            <strong>Restore Data</strong>
                            <span>Pulihkan dari file backup</span>
                        </div>
                    </div>
                    <input type="file" id="restore-file" accept=".json" onchange="restoreData(event)" hidden>
                    <button class="btn-text" onclick="document.getElementById('restore-file').click()">Restore</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast">
        <i class="fas fa-check-circle"></i>
        <span id="toast-message">Berhasil!</span>
    </div>

    <!-- Edit/Delete Confirmation -->
    <div id="confirm-modal" class="modal">
        <div class="modal-content modal-small">
            <div class="confirm-content">
                <i class="fas fa-question-circle"></i>
                <h3 id="confirm-title">Konfirmasi</h3>
                <p id="confirm-message">Apakah Anda yakin?</p>
                <div class="confirm-actions">
                    <button class="btn-secondary" onclick="closeModal('confirm-modal')">Batal</button>
                    <button class="btn-danger" id="confirm-btn">Ya, Hapus</button>
                </div>
            </div>
        </div>
    </div>

    <script src="js/app.js"></script>
</body>
</html>